const t=import("./libs.js"),e=parseInt(localStorage.getItem("start"),10),a=1e3*(Number.isNaN(e)?60:e);let o=-1;const n=[i("clock--top"),i("clock--bottom")],s=document.querySelector(".button--pause"),r=document.querySelector(".button--reset");function i(t){const e=document.querySelector(`.${t}`),a=e.querySelector(".clock");return{button:e,display:a,active:!1,elapsedSoFar:0,lastPaused:-1,lastDisplayed:-1}}function c(t,e){return t.active?-1!==t.lastPaused?e-t.lastPaused+t.elapsedSoFar:0:t.elapsedSoFar}function l(t,e){t.display.classList.remove("clock--active"),-1!==t.lastPaused&&(t.elapsedSoFar=c(t,e)),t.active=!1,t.lastPaused=e}function d(t=Date.now()){o=-1,s.hidden=!0,n.forEach(e=>l(e,t))}n.forEach((e,a)=>{const r="onpointerdown"in e.button?"pointerdown":"click";e.button.addEventListener(r,()=>function(e,a=Date.now()){let r=e+1;if(r>=n.length&&(r=0),-1===o)s.hidden=!1,-1===n[r].lastPaused&&t.then(({track:t})=>t({id:"start-timer"}));else{if(o===r)return;l(n[o],a)}n[r].display.classList.add("clock--active"),o=r,n[r].active=!0,n[r].lastPaused=a}(a))}),s.addEventListener("click",()=>d()),r.addEventListener("click",()=>{d(),window.confirm("Are you sure you want to reset the timers?")&&n.forEach(t=>{t.elapsedSoFar=0,t.lastPaused=-1})}),requestAnimationFrame((function t(){const e=Date.now();n.forEach(t=>function(t,e=Date.now()){const o=a-c(t,e),n=Math.max(0,Math.floor(o/1e3));if(n===t.lastDisplayed)return;const s=String(Math.floor(n/60)),r=String(n%60);t.display.textContent=`${s}:${r.padStart(2,"0")}`,t.display.dateTime=`PT${s}M${r}S`,t.lastDisplayed=n,0===n&&navigator.vibrate(200)}(t,e)),requestAnimationFrame(t)}));
